# Задание 1.
# Данызначения величины заработной платы заемщиков банка(zp) и значения их поведенческого кредитного
# скоринга(ks): zp = ([35, 45, 190, 200, 40, 70, 54, 150, 120, 110],
# ks)  = ([401, 574, 874, 919, 459, 739, 653, 902, 746, 832].
# Найдите) ковариацию этих двух величин с помощью элементарных действий, а затем с помощью функции
# cov из numpy Полученные значения должны быть равны. Найдите коэффициент корреляции Пирсона с помощью
# ковариации и среднеквадратичных отклонений двух признаков, а затем с использованием функций из библиотек
# numpy и pandas.
import numpy as np
import pandas as pd
import stats
import scipy.stats as stats

#Данные
zp=np.array([35,45,190,200,40,70,54,150,120,110])
ks=np.array([401,574,874,919,459,739,653,902,746,832])
#1.Ковариация вручную
mean_zp=np.mean(zp)
mean_ks=np.mean(ks)
cov_manual=np.sum((zp-mean_zp)*(ks-mean_ks))/(len(zp)-1)
print(f"Ковариация вручную:{cov_manual}")
#2.Ковариация с помощью numpy
cov_numpy=np.cov(zp,ks)[0,1]
print(f"Ковариация с помощьюnumpy:{cov_numpy}")
#3.Коэффициент корреляции Пирсона вручную
std_zp=np.std(zp,ddof=1)
std_ks=np.std(ks,ddof=1)
correlation_manual=cov_manual/(std_zp*std_ks)
print(f"Коэффициент корреляции Пирсона вручную:{correlation_manual}")
#4.Коэффициент корреляции Пирсона с помощью numpy
correlation_numpy = np.corrcoef(zp, ks)[0, 1]
print(f"Коэффициент корреляции Пирсона с помощью numpy:{correlation_numpy}")
# 5. Коэффициент корреляции Пирсона с помощью pandas
correlation_pandas = pd.Series(zp).corr(pd.Series(ks))
print(f"Коэффициент корреляции Пирсона с помощью pandas:{correlation_pandas}")

# Задача 2.
# Измерены значения IQ выборки студентов, обучающихся в местных
# технических вузах: 131, 125, 115, 122, 131, 115, 107, 99, 125, 111.
# Известно, что в генеральной совокупности IQ распределен нормально. Найдите доверительный
# интервал для математического ожидания с надежностью 0.95.

#Данные
IQ=[131,125,115,122,131,115,107,99,125,111]
n=len(IQ)
mean_IQ=np.mean(IQ)
std_IQ=np.std(IQ,ddof=1)
#Уровеньзначимости
alpha=0.05
#Критическоезначениеtдля95%доверительногоинтервала
t_crit=stats.t.ppf(1-alpha/2,df=n-1)
#Доверительныйинтервал
margin_of_error=t_crit*(std_IQ/np.sqrt(n))
confidence_interval=(mean_IQ-margin_of_error,mean_IQ+margin_of_error)
print(f"Доверительный интервал для среднего IQ:{confidence_interval}")

# Задача 3.
# Известно, что рост футболистов в сборной распределен нормально с дисперсией
# генеральной совокупности, равной 25 кв.см. Объем выборки равен 27, среднее
# выборочное составляет 174.2. Найдите доверительный интервал для математического
# ожидания с надежностью 0.95

#Данные
sigma=5 #Стандартноеотклонение(кореньиздисперсии)
n=27
mean_sample=174.2
#Уровеньзначимости
alpha=0.05
#КритическоезначениеZдля95%доверительногоинтервала
z_crit=stats.norm.ppf(1-alpha/2)
#Доверительныйинтервал
margin_of_error=z_crit*(sigma/np.sqrt(n))
confidence_interval=(mean_sample-margin_of_error,mean_sample+margin_of_error)
print(f"Доверительный интервал для среднего роста:{confidence_interval}")

